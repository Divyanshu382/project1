"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6588],{96588:function(e,o,n){n.r(o);var t=n(85893),a=n(67294),i=n(9669),c=n.n(i),s=n(67116),u=n(56822),l=n(11163),r=n(2664),g=n(61474),p=n(59073),d="https://api.themediaant.com";o.default=function(){var e=(0,r.v9)((function(e){return e.auth})).user,o=void 0===e?{}:e,n=(0,a.useState)(!1),i=n[0],f=n[1],m=(0,u.Z)(),_=(0,l.useRouter)(),h=(0,r.I0)(),k=function(){window.google.accounts.id.initialize({client_id:"1004020789986-rdbmaoobur0pffkm9dc8a7mjpv4h7svg.apps.googleusercontent.com",callback:v,auto_select:!1}),window.google.accounts.id.prompt((function(e){(e.isNotDisplayed()||e.isSkippedMoment())&&console.log("Prompt not displayed:",e.getNotDisplayedReason(),e.getSkippedReason())}))},v=function(e){c().post(d+"/authenticate/google",{token:null===e||void 0===e?void 0:e.credential,sourceURL:d+_.asPath}).then((function(e){return(0,g.B)({action:"onetap_google_sign_in",category:"onetap_google_sign_in",label:"onetap_google_sign_in"}),localStorage.setItem("authToken",e.data.token),f(e.data.newUser),h((0,s.BT)(e.data.token)).then((function(){return h((0,s.f2)())}))})).catch((function(e){console.log(e)}))};return(0,a.useEffect)((function(){m||function(){var e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=k,e.onerror=function(){console.error("Error loading Google One Tap script")},document.body.appendChild(e)}()}),[m]),(0,a.useEffect)((function(){i&&o&&o.email&&(0,p.Z)({email:o.email,event_name:"onetap_google_sign_up"})}),[i,o]),(0,t.jsx)(t.Fragment,{})}}}]);